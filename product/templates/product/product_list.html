{% extends 'global/sidebar.html' %}
{% load static %}

{% block content %}
<h1 class="text-2xl font-bold text-[#FF7690] mb-6">LISTA DE PRODUTOS</h1>

<!-- Barra de pesquisa -->
<div class="mb-6 flex justify-end items-center">

  <div class="relative w-full max-w-md">
    <input
      id="search_right"
      type="text"
      name="query"
      value="{{ query }}"
      placeholder="Pesquisar"
      class="w-full border border-gray-300 rounded-lg py-2 pl-4 pr-10 bg-white focus:outline-none focus:ring-2 focus:ring-rose-400"
    />

    <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
      <svg
        class="h-5 w-5 text-gray-400"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 20 20"
        fill="currentColor"
        aria-hidden="true"
      >
        <path
          fill-rule="evenodd"
          d="M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z"
          clip-rule="evenodd"
        />
      </svg>
    </div>
  </div>
</div>

<!-- Tabela de produtos -->
<div class="bg-white rounded-2xl shadow-md overflow-hidden border border-gray-300">
  <table class="w-full">
    <thead class="bg-[#F7E8EB]">
      <tr>
        <th class="px-6 py-3 text-center text-xs font-medium text-[#555555] uppercase border border-gray-300">Visualizar</th>
        <th class="px-6 py-3 text-left text-xs font-medium text-[#555555] uppercase border border-gray-300">Nome</th>
        <th class="px-6 py-3 text-left text-xs font-medium text-[#555555] uppercase border border-gray-300">Categoria</th>
        <th class="px-6 py-3 text-center text-xs font-medium text-[#555555] uppercase border border-gray-300">Variação</th>
        <th class="px-6 py-3 text-center text-xs font-medium text-[#555555] uppercase border border-gray-300">Estoque</th>
        <th class="px-6 py-3 text-left text-xs font-medium text-[#555555] uppercase border border-gray-300">Preço</th>
        <th class="px-6 py-3 text-center text-xs font-medium text-[#555555] uppercase border border-gray-300">Lucro (%)</th>
        <th class="px-6 py-3 text-center text-xs font-medium text-[#555555] uppercase border border-gray-300">Ativo</th>
        <th class="px-6 py-3 text-left text-xs font-medium text-[#555555] uppercase border border-gray-300">Criado em</th>
      </tr>
    </thead>
    <tbody class="divide-y divide-gray-200">
      {% for product in products %}
      <tr class="hover:bg-rose-50">
        <td class="px-6 py-4 text-center border border-gray-300">
          <a href="#" class="text-gray-600" title="Visualizar">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 inline" viewBox="0 0 20 20" fill="currentColor">
              <path d="M10 12a2 2 0 100-4 2 2 0 000 4z" />
              <path fill-rule="evenodd" d="M.458 10C1.732 5.943 5.523 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z" clip-rule="evenodd" />
            </svg>
          </a>
        </td>
        <td class="px-6 py-4 text-sm text-gray-900 border border-gray-300">{{ product.name }}</td>
        <td class="px-6 py-4 text-sm text-gray-900 border border-gray-300">{{ product.category.name }}</td>
        <td class="px-6 py-4 text-center text-sm text-gray-900 border border-gray-300">
          {% if product.has_variation %}
            <span class="text-green-600 font-semibold">Sim</span>
          {% else %}
            <span class="text-gray-500">Não</span>
          {% endif %}
        </td>
        <td class="px-6 py-4 text-center text-sm text-gray-900 border border-gray-300">{{ product.total_stock }}</td>
        <td class="px-6 py-4 text-sm font-medium text-rose-600 border border-gray-300">R$ {{ product.selling_price|floatformat:2 }}</td>
        <td class="px-6 py-4 text-center text-sm text-gray-900 border border-gray-300">
          {% if product.profit_margin %}
            {{ product.profit_margin|floatformat:2 }}%
          {% else %}
            -
          {% endif %}
        </td>
        <td class="px-6 py-4 text-center text-sm border border-gray-300">
          {% if product.is_active %}
            <span class="text-green-600 font-semibold">Ativo</span>
          {% else %}
            <span class="text-red-600 font-semibold">Inativo</span>
          {% endif %}
        </td>
        <td class="px-6 py-4 text-sm text-gray-900 border border-gray-300">{{ product.created_at|date:"d/m/Y" }}</td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="9" class="px-6 py-4 text-center text-[#555555] border border-gray-300">
          Nenhum produto encontrado.
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>


<!-- Botões -->
<div class="mt-6 flex justify-start space-x-4">
  <a href="#" class="bg-[#F1F0BE] hover:bg-[#E0DFAB] text-[#555555] px-6 py-2 rounded-lg font-medium transition-colors cursor-pointer">
    Adicionar Produto
  </a>
  <a href="#" class="bg-[#F1F0BE] hover:bg-[#E0DFAB] text-[#555555] px-6 py-2 rounded-lg font-medium transition-colors cursor-pointer">
    Editar Produto
  </a>
  <a href="#" class="bg-[#EA8484] hover:bg-[#D97373] text-[#555555] px-6 py-2 rounded-lg font-medium transition-colors cursor-pointer">
    Excluir Produto
  </a>
</div>
{% endblock %}
