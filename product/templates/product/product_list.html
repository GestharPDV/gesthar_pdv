{% extends 'base/base.html' %}
{% load static %}

{% block content %}
<div class="pr-20 pl-20">
    <div class="d-flex justify-content-between align-items-center">
    <h1 class="titulo">LISTA DE PRODUTOS</h1>
  </div>

  <form method="GET" action="{% url 'product:product-list' %}" class="mb-4 d-flex justify-content-end">
    <div class="position-relative w-100" style="max-width:400px;">
      <input id="search_right" type="text" name="query" value="{{ query }}"
        class="form-control rounded-pill bg-transparent pe-4" placeholder="Pesquisar"
        style="color: var(--cor-fonte-cinza) !important;">
      <button type="submit" aria-label="Pesquisar" style="color: var(--cor-fonte-cinza) !important;"
        class="position-absolute end-0 top-50 translate-middle-y border-0 bg-transparent p-0 pe-3">
        <!-- Heroicons magnifying glass (outline) -->
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
          class="h-5 w-5" width="20" height="20" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round"
            d="M21 21l-4.35-4.35M11 18.5a7.5 7.5 0 100-15 7.5 7.5 0 000 15z" />
        </svg>
      </button>
    </div>
  </form>

  <div class="rounded-4 shadow-sm border border-light overflow-hidden">
    <table class="table table-bordered align-middle mb-0 text-center product-list">
    <thead>
  <tr class="cabecalho text-center text-uppercase text-secondary">
          <th>Visualizar</th>
          <th>Nome</th>
          <th>Categoria</th>
          <th>Estoque</th>
          <th>Preço</th>
          <th>Status</th>
        </tr>
      </thead>

      <tbody>
        {% for product in products %}
        <tr class="align-middle" style="cursor:default;">
          <!-- Visualizar -->
          <td class="d-flex justify-content-center align-items-center">
            <a href="{% url 'product:product-detail' product.pk %}" class="text-secondary d-inline-flex"
              title="Visualizar">
              <!-- Feather-style eye (stroke) - chosen variant -->
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="none" stroke="currentColor"
                stroke-width="2" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24"
                class="feather feather-eye" aria-hidden="true">
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8S1 12 1 12z"></path>
                <circle cx="12" cy="12" r="3"></circle>
              </svg>
            </a>
          </td>


          <!-- Nome -->
          <td>{{ product.name }}</td>

          <!-- Categoria -->
          <td>{{ product.category.name }}</td>

          <!-- Estoque -->
          <td>{{ product.total_stock }}</td>

          <!-- Preço -->
          <td class="fw-semibold" style="color:var(--cor-fonte-rosa);">R$ {{ product.selling_price|floatformat:2 }}</td>

          <!-- Status -->
          <td class="fw-semibold">
            {% if product.is_active %}
            <span class="text-success">Ativo</span>
            {% else %}
            <span class="text-danger">Inativo</span>
            {% endif %}
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="6" class="text-center text-muted py-4">
            Nenhum produto encontrado.
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}